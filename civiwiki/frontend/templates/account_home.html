<!doctype html>

<head>
    {% load staticfiles %}
    <link type="text/css" rel="stylesheet/less" href="{% static "less/account_base.less" %}"/>

    {% include "basics/links.html" %}

    <title>CiviWiki</title>
</head>

<script id="base-template" type="text/template">
    {% include "basics/nav.html" %}
    <div class="base-template-inner">
        <div class="row">
            <div class="col s3">
                <div class="center-align">
                    <span class="user-name">
                        <%- user.first_name %> <%- user.last_name %>
                    </span>
                </div>
                <div class="center-align">
                    <img class="user-profile-pic" src="<%= user.profile_image %>">
                </div>
                <div class="center-align">
                    <span class="user-description">
                        A little about me...
                        <!-- <%- user.description %> -->
                    </span>
                </div>
            </div>
            <div class="col s9">
                <ul class="tabs purple-text">
                    <li class="tab col s3"><a class="purple-text" href="#following">Following</a></li>
                    <li class="tab col s3"><a class="purple-text" href="#friends">Friends</a></li>
                    <li class="tab col s3"><a class="active purple-text" href="#interests">Interests</a></li>
                    <li class="tab col s3"><a class="purple-text" href="#groups">Groups</a></li>
                    <li class="tab col s3"><a class="purple-text" href="#user_data">Your Account</a></li>
                    <div class="indicator purple-background" style="z-index:1"></div>
                </ul>
            </div>
            <div id="following" class="col s9">

            </div>
            <div id="friends" class="col s9">

            </div>
            <div id="interests" class="col s9">

            </div>
            <div id="groups" class="col s9">

            </div>
            <div id="user_data" class="col s9">

            </div>
        </div>
    </div>
</script>
<script id="interest-tab-template" type="text/template">
    <div>
    <p><a class = "yolo" href="javascript:void(0);" id ="yolo">Reset Database</a></p>
        <% console.log(user.interests)%>
        <% console.log(user.interests.length)%>
        <% var interestSize = interest.length %>
        <% _.each(interest, function(eachInterest) { %>
            <% var temp = eachInterest.name.replace(/ /g,'') %>
            <% var temp1 = parseInt(eachInterest.id)+parseInt(interestSize)%>
            <% var temp2 = parseInt(eachInterest.id)+parseInt(interestSize*2)%>
            <% var temp3 = parseInt(eachInterest.id)+parseInt(interestSize*3)%>
            <% temp =  "static/img/interest_pics/" + temp+".jpg"%>
            <div class = "col s5">
            <div class="card interest-item small" data-id="<%= eachInterest.name %>">
                <div class="card-image waves-effect waves-block waves-light">
                    <img class="activator" src=<%= temp %>>
                </div>
                    <% if (user.interests.indexOf(eachInterest.id + "") == -1 ) {%>
                        <div class="card-content grey darken-3" id = "<%= temp2 %>">
                <%} else{ %> <div class="card-content purple-background" id = "<%= temp2 %>">
                <%};%>
                        <span class="card-title activator white-text text-darken-4"><%- eachInterest.name %><i class="material-icons right">more_vert</i></span>
                        <% if (user.interests.indexOf(eachInterest.id + "") == -1 ) {%>
                            <p><a class = "followInterest" href="javascript:void(0);" id ="<%= eachInterest.id %>">Click Here to Follow</a></p>
                            <%  console.log(user.interests + " " + eachInterest.id + " follow")        %>
                        <%} else{ %>  <p><a class = "followInterest" href="javascript:void(0);" id ="<%= eachInterest.id %>">Click Here to Unfollow</a></p>

                            <%  console.log(user.interests + " " + eachInterest.id + " unfollow")        %>
                        <%};%>
                    </div>

                     <% if (user.interests.indexOf(eachInterest.id + "") == -1 ) {%>
                             <div class="card-reveal grey darken-3" id = "<%= temp3 %>">
                                        <% console.log(temp3) %>
                                <%} else{ %> <div class="card-reveal purple-background" id = "<%= temp3 %>">
                                        <% console.log(temp3) %>
                                <%};%>
                        <span class="card-title white-text text-darken-4"><%- eachInterest.name %><i class="material-icons right">close</i></span>
                        <p class = "white-text"><%- eachInterest.name %> has an id of <%- eachInterest.id %></p>
                         <% if (user.interests.indexOf(eachInterest.id + "") == -1 ) {%>
                            <p><a class = "followInterest" href="javascript:void(0);" id ="<%= temp1 %>">Click Here to Follow</a></p>
                                  <%  console.log(user.interests + " " + temp1 + " follow")        %>

                        <%} else{ %>  <p><a class = "followInterest" href="javascript:void(0);" id ="<%= temp1 %>">Click Here to Unfollow</a></p>
                            <%  console.log(user.interests + " " + temp1 + " unfollow")        %>
                         <%};%>
                </div>
                    </div>
            </div>
            </div>
        <% }); %>
    </div>
</script>
<body>
    <div id="account-base">
    </div>
</body>

<!-- Backbone Views File -->
<script src="/static/views/account_base_view.js" type="text/javascript"></script>

<script>
<<<<<<< HEAD
    var data = {{user_data|safe}};

    var userModel = new Backbone.Model(data);
=======
    var userModel = new Backbone.Model({{result|safe}});
>>>>>>> master
    var accountBaseView = new AccountBaseView({
        userModel: userModel
    });
</script>

</html>
